# Развертывание коммутируемой сети с резервными каналами
### Топология
![](топология.png)
### Таблица адресации
| Устройство  | Интерфейс | IP-адрес   | Маска подсети |
|-------------|-----------|------------|---------------|
| S1          | VLAN 1    |192.168.1.1 |255.255.255.0  |
| S2          | VLAN 1    |192.168.1.2 |255.255.255.0  |
| S3          | VLAN 1    |192.168.1.3 |255.255.255.0  |
### Цели
1. Создание сети и настройка основных параметров устройства
2. Выбор корневого моста
3. Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов
4. Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов
### 1. Создание сети и настройка основных параметров устройства
#### Шаг 1. Создайте сеть согласно топологии.
Подключаем устройства, как показано в топологии, и подсоедините необходимые кабели.
#### Шаг 2:	Выполните инициализацию и перезагрузку коммутаторов.
#### Шаг 3:	Настройте базовые параметры каждого коммутатора.
Входим в привилегированный режим.    
Входим в режим глобальной конфигурации.   
Отключаем интерпретацию команды как DNS имя - на случай ввода команды с ошибкой.   
Задаем имя коммутатора.   
Включаем шифрование паролей.   
Устанавливаем пароль для доступа к коммутатору через консольный кабель и включаем доступ к пользовательскому режиму.   
Устанавливаем локальный пароль доступа в привилегированный режим консоли.   
Задаем баннерное сообщение при входе в систему.    
```
enable
configure terminal
no ip domain-lookup
hostname S1
service password-encryption
line console 0
password cisco
login
enable secret class
banner motd @--- Unauthorized access is strictly prohibited ---@
```
Настраиваем приостановку вывода системных сообщений в момент ввода команды для консольного канала.
```
line console 0
logging synchronous
```
Задаем IP-адрес, указанный в таблице адресации для VLAN 1.
```
interface vlan 1
ip address 192.168.1.1 255.255.255.0
no shutdown
```
Сохраняем текущую конфигурацию в файл загрузочной конфигурации с использованием команды ***copy running-config startup-config***.    
**Повторяем процедуру для каждого коммутатора.**
#### Шаг 4:	Проверьте связь.
Проверяем способность устройств обмениваться эхо-запросами.    
Эхо запросы от коммутатора S1 до коммутаторов S2 и S3, а также от коммутатора S2 до коммутатора S3 выполняются успешно.
```
S1#ping 192.168.1.2
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 192.168.1.2, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms

S1#ping 192.168.1.3
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 192.168.1.3, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/1 ms
```
### 2. Определение корневого моста

Шаг 1:	Отключите все порты на коммутаторах.
Шаг 2:	Настройте подключенные порты в качестве транковых.
Шаг 3:	Включите порты F0/2 и F0/4 на всех коммутаторах.
Шаг 4:	Отобразите данные протокола spanning-tree.
Введите команду show spanning-tree на всех трех коммутаторах. Приоритет идентификатора моста рассчитывается путем сложения значений приоритета и расширенного идентификатора системы. Расширенным идентификатором системы всегда является номер сети VLAN. В примере ниже все три коммутатора имеют равные значения приоритета идентификатора моста (32769 = 32768 + 1, где приоритет по умолчанию = 32768, номер сети VLAN = 1); следовательно, коммутатор с самым низким значением MAC-адреса становится корневым мостом (в примере — S2).
S1# show spanning-tree











